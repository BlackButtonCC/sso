<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.hydra.sso.server.dao.UserDao">
    <select id="findUserByAccount" resultType="com.hydra.sso.server.model.User">
        SELECT (`id`,`name`,`account`,`password`,
        `last_login_ip`,`last_login_time`,`login_count`) FROM sso_user
        WHERE account = #{account,jdbcType=VARCHAR}
    </select>

    <update id="updateLoginInfo" parameterType="com.hydra.sso.server.model.User">
        UPDATE sso_user
        SET last_login_ip = #{lastLoginIp,jdbcType=VARCHAR},
        last_login_time = #{lastLoginTime,jdbcType=TIMESTAMP},
        login_count = login_count + 1
        WHERE id = #{id,jdbcType=BIGINT}
    </update>

</mapper>